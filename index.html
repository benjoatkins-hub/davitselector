<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Boat Lifting Solution Builder — Atkins & Hoyle</title>
  <meta name="description" content="Interactive davit selector for Atkins & Hoyle products — get a recommendation and request a quote." />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --navy:#00293b; --muted:#6b7280; --border:#e6e9ec; --accent:#ff9f1c; --card:#ffffff;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; color:var(--navy);
      background: #ffffff; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; padding:36px;
    }
    .container{max-width:980px;margin:0 auto}
    header{display:flex;align-items:center;gap:18px;margin-bottom:18px}
    .logo{display:flex;flex-direction:column}
    .brand{font-family:'Playfair Display',serif;font-size:20px;color:var(--navy);letter-spacing:0.4px}
    .tag{font-size:12px;color:var(--muted)}

    .grid{display:grid;grid-template-columns:1fr 420px;gap:20px}
    .hero{padding:24px;border-radius:8px;background:var(--card);border:1px solid var(--border)}
    h1{margin:0 0 8px 0;font-family:'Playfair Display';font-size:24px;color:var(--navy)}
    p.lead{margin:0 0 14px 0;color:var(--muted)}

    .form{background:transparent;padding:0}
    label{display:block;font-size:13px;color:var(--navy);margin-bottom:4px}
    .row{display:flex;gap:12px;margin-bottom:12px}
    input[type=number],select{flex:1;padding:10px;border-radius:6px;border:1px solid var(--border);background:transparent;color:var(--navy);outline:none;margin-bottom:8px}
    .radio-row{display:flex;gap:8px;flex-wrap:wrap}
    .radio{background:#fff;border:1px solid var(--border);padding:8px 10px;border-radius:6px;color:var(--navy);cursor:pointer}
    .radio input{margin-right:8px}

    .actions{display:flex;gap:12px;align-items:center;margin-top:8px}
    button.primary{background:var(--navy);border:none;color:#fff;padding:10px 16px;border-radius:6px;font-weight:600;cursor:pointer}
    button.ghost{background:transparent;border:1px solid var(--border);color:var(--navy);padding:9px 14px;border-radius:6px;cursor:pointer}

    .side-card{padding:18px;border-radius:8px;background:var(--card);border:1px solid var(--border)}
    .result{margin-top:14px;padding:14px;border-radius:6px;background:transparent}
    .product-title{font-family:'Playfair Display';font-size:18px;color:var(--navy)}
    .product-sub{font-size:14px;color:var(--muted);margin-top:8px}
    .product-links{margin-top:12px;display:flex;gap:8px}
    .quote{display:block;margin-top:12px}

    footer{margin-top:20px;color:var(--muted);font-size:13px}
    .wave{display:none}

    /* Product preview image (centered, responsive) */
    .product-preview{width:100%;max-width:300px;height:auto;display:block;margin:0 auto 16px auto;border-radius:6px}
    .recommendation-image {
      width: 100%;
      max-height: 260px;
      object-fit: contain;
      margin-bottom: 16px;
      border-radius: 8px;
    }
    .key-features {
      margin-top: 10px;
      padding-left: 18px;
    }
    .key-features li {
      margin-bottom: 6px;
      line-height: 1.4;
    }
    .recommended-card{display:block}

    @media(max-width:900px){.grid{grid-template-columns:1fr;}.side-card{order:2}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <div class="brand">Atkins & Hoyle</div>
        <div class="tag">Davit Selector — Find the right lifting solution</div>
      </div>
    </header>

    <main class="grid">
      <section class="hero">
        <h1>Boat Lifting Solution Builder</h1>
        <p class="lead">Answer a few questions and we’ll recommend the right davit or crane system for your boat.</p>

        <div class="form" id="selectorForm">
          <div class="form-group">
            <h4>Weight</h4>
            <div class="row">
              <div style="flex:1">
                <label for="dinghyWeight">Dinghy Weight (lbs)</label>
                <input id="dinghyWeight" type="number" min="10" max="5000" value="300" />
              </div>
              <div style="width:160px">
                <label for="engineWeight">Outboard Engine Weight (lbs)</label>
                <input id="engineWeight" type="number" min="0" max="2000" value="0" />
              </div>
            </div>
          </div>

          <div class="form-group">
            <h4>Mounting Location</h4>
            <div class="radio-row mount-options">
              <label class="radio"><input name="mount" type="radio" value="swim" checked> Swim Platform</label>
              <label class="radio"><input name="mount" type="radio" value="transom"> Transom</label>
              <label class="radio"><input name="mount" type="radio" value="rail"> Rail</label>
              <label class="radio"><input name="mount" type="radio" value="deck"> Deck</label>
            </div>
          </div>

          <div class="form-group">
            <h4>Configuration</h4>
            <div style="margin-bottom:8px">
              <label for="boatType">Boat Type <span style="color:var(--muted);font-size:12px">(required)</span></label>
              <select id="boatType" required>
                <option value="sailboat">Sailboat</option>
                <option value="powerboat" selected>Powerboat</option>
              </select>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
              <div>
                <label for="tenderType">Tender Type</label>
                <select id="tenderType">
                  <option value="inflatable" selected>Inflatable</option>
                  <option value="rib">RIB</option>
                  <option value="hardskiff">Hard Skiff</option>
                </select>
              </div>
              <div>
                <label for="winchPref">Power / Winch Preference</label>
                <select id="winchPref">
                  <option value="manual">Manual</option>
                  <option value="electric">Electric</option>
                  <option value="unsure" selected>Not sure</option>
                </select>
              </div>
            </div>
          </div>

          <!-- Mounting Surface option removed per new spec -->

          <!-- Usage Type removed per updated requirements -->

          <div class="actions">
            <button type="button" class="primary" id="recommendBtn">Get Recommendation</button>
            <button type="button" class="ghost" id="resetBtn">Reset</button>
            <a class="ghost" href="https://atkinshoyle.com/about.html">View All Products</a>
          </div>
        </div>

        <svg class="wave" viewBox="0 0 1200 120" preserveAspectRatio="none" style="width:100%;height:60px;display:block">
          <path d="M0,0 C150,100 350,0 600,40 C850,80 1050,10 1200,60 L1200 120 L0 120 Z" fill="rgba(255,255,255,0.03)"></path>
        </svg>
      </section>

      <aside class="side-card">
        <h3 style="margin:0 0 6px 0">Recommendation</h3>
        <div class="result" id="resultArea">
          <div class="product-title">No selection yet</div>
          <div class="product-sub">Fill the form and click <strong>Get Recommendation</strong> to see the best fit for your boat.</div>
        </div>

        <!-- Replaced by per-model Key Features in the recommendation card -->

        <div id="quoteArea" class="quote" style="display:none">
          <!-- Inline quote form will be injected here -->
        </div>
      </aside>
    </main>

    <footer>
      Recommendations use Atkins & Hoyle's product range (davits & cranes). For precise sizing and installation details, contact the Atkins & Hoyle team.
    </footer>
  </div>

  <script>
    // Product catalog (models discovered on atkinshoyle.com)
    // Placeholder capacities (update these numbers to match exact SWL values)
    const CAPACITIES = {
      MODEL_120: 120,      // Model 120 SWL (lbs)
      MODEL_1200R: 200,    // Model 1200R SWL (lbs)
      MODEL_1400R: 250,    // Model 1400R SWL (lbs)
      MODEL_1400F: 250,    // Model 1400F SWL (lbs)
      MODEL_1900R: 300,    // Model 1900R SWL (lbs)
      MODEL_1900F: 300,    // Model 1900F SWL (lbs)
      MODEL_2000: 350,     // Model 2000 SWL (lbs)
      MODEL_5000F: 750,    // Model 5000F SWL (lbs)
      MODEL_3000R: 300,    // Model 3000R SWL (lbs)
      MODEL_5000R: 750,    // Model 5000R SWL (lbs) - placeholder
      MODEL_6500T: 650,    // Model 6500T SWL (lbs)
      MODEL_8000T: 800     // Model 8000T SWL (lbs)
    };

    // Per-model curated feature summaries (short, sales-focused)
    const KEY_FEATURES = {
      '120': [
        'Lifts up to 120 lbs (54 kg)',
        'Compact, lightweight design for easy handling',
        'Rail and transom mounting options',
        'Smooth rotation on low-friction sleeves',
        'Includes mounting hardware and pre-rigged line'
      ],
      '1200r': [
        '200 lb rated rotating davit',
        'Compact removable arm for neat storage',
        'Adjustable standpipe height for reach',
        'Smooth, low-maintenance rotation',
        'Pre-rigged with quality line and blocks'
      ],
      '1400r': [
        '250 lb rotating davit for larger inflatables',
        'Adjustable angle and reach for versatile mounting',
        'Robust cast components for longevity',
        'Simple removal for winter storage',
        'Complete kit with hardware and block-and-tackle'
      ],
      '1900r': [
        '300 lb capacity with adjustable angle',
        'Heavy-duty materials for marine environments',
        'Smooth 360° rotation and locking collar',
        'Ideal for 11’ RIBs and larger tenders',
        'Supplied pre-rigged and ready to install'
      ],
      '1400f': [
        '250 lb fixed davit for secure transom mounting',
        'Adjustable base casting for custom angle',
        'Compact, corrosion-resistant construction',
        'Works well with small RIBs and outboards',
        'Includes all mounting hardware'
      ],
      '1900f': [
        '300 lb fixed davit for heavy-duty use',
        'Adjustable angle for optimized reach',
        'Solid cast components for long service life',
        'Recommended for larger inflatables and motors',
        'Complete kit with block-and-tackle'
      ],
      '2000': [
        '350 lb rated fixed davit — high capacity, low weight',
        'Sand-cast AlMag alloy construction for strength',
        'Versatile mounting: deck, transom, swim platform',
        'Optional riser arms for extended reach',
        'Includes hardware and pre-rigged lifting line'
      ],
      '5000f': [
        'Up to 750 lb lifting capacity for large tenders',
        'Adjustable spline for precise boom angle',
        'Heavy-duty cast construction and hardware',
        'Optional electric winch compatibility',
        'Complete installation kit included'
      ],
      '3000r': [
        '300 lb rotating crane with wide reach',
        '360° rotation and robust mounting options',
        'Smooth manual winch with optional electric upgrade',
        'Designed for deck, transom or hardtop installation',
        'Supplied as a ready-to-install kit'
      ],
      '5000r': [
        '500 lb rotating crane for heavy lifting',
        'Strong, corrosion-resistant components',
        'Optional power winch for effortless operation',
        'Collapsible design for easy storage',
        'Ideal for larger tenders and gear'
      ],
      '6500t': [
        '650 lb low-profile crane with high capacity',
        'Horizontal folding boom for compact storage',
        'Optional electric winch and remote control',
        'Robust installation kit included',
        'Engineered for frequent heavy use'
      ],
      '8000t': [
        'Exceptional 800 lb lifting capacity',
        'Low-profile horizontal folding boom',
        'Optional telescoping boom for added reach',
        '12V electric winch operation available',
        'Full installation kit and hardware included'
      ],
      '3000jr': [
        'Compact 300 lb junior crane for limited spaces',
        'Lightweight yet durable construction',
        'Easy-to-remove head for storage',
        'Smooth manual winch with optional electric upgrade',
        'Versatile mount options for decks and rails'
      ],
      '1400c': [
        '150 lb rotating crane — compact and nimble',
        'Ideal for small outboards and accessories',
        'Simple installation and low maintenance',
        'Smooth rotation and secure locking',
        'Pre-rigged kit for quick setup'
      ],
      '1900c': [
        '200 lb rotating crane with robust build',
        'Adjustable arm angle for reach control',
        'Durable components suited to marine use',
        'Good balance of capacity and compactness',
        'Supplied as a ready-to-install kit'
      ]
    };

    const catalog = {
      // Rail mount davits (rail-mount only)
      '120':  { key:'120',  title:'Model 120',  swl:CAPACITIES.MODEL_120,  link:'https://atkinshoyle.com/120-outboard-lift-capacity-of-120-lb.html', type:'davit', mount:'rail', image:'https://atkinshoyle.com/uploads/products/120-motor-lift-main.JPG' },
      '1200r':{ key:'1200r',title:'Model 1200R',swl:CAPACITIES.MODEL_1200R,link:'https://atkinshoyle.com/1200-rotating-davits-capacity-of-200-lbs.html', type:'davit', mount:'rail', image:'https://atkinshoyle.com/uploads/products/1200-rotating-davit-main.jpg' },
      '1400r':{ key:'1400r',title:'Model 1400R',swl:CAPACITIES.MODEL_1400R,link:'https://atkinshoyle.com/1400-rotating-davits-capacity-of-250-lbs.html', type:'davit', mount:'rail', image:'https://atkinshoyle.com/uploads/products/1400-adjustable-rotating-davits-main.JPG' },
      '1900r':{ key:'1900r',title:'Model 1900R',swl:CAPACITIES.MODEL_1900R,link:'https://atkinshoyle.com/1900-rotating-davits-capacity-of-300-lbs.html', type:'davit', mount:'rail', image:'https://atkinshoyle.com/uploads/products/1900-rotating-adjustable-davits-main.jpg' },

      // Fixed / Transom / Deck mounted davits
      '1400f':{ key:'1400f',title:'Model 1400F',swl:CAPACITIES.MODEL_1400F,link:'https://atkinshoyle.com/1400-fixed-davits-capacity-of-250-lbs.html', type:'davit', mount:'fixed', image:'https://atkinshoyle.com/uploads/products/1400-fixed-adjustable-davit-main.JPG' },
      '1900f':{ key:'1900f',title:'Model 1900F',swl:CAPACITIES.MODEL_1900F,link:'https://atkinshoyle.com/1900-fixed-davits-capacity-of-300-lbs.html', type:'davit', mount:'fixed', image:'https://atkinshoyle.com/uploads/products/1900-fixed-adjustable-davit-9-main.jpg' },
      '2000': { key:'2000', title:'Model 2000', swl:CAPACITIES.MODEL_2000, link:'https://atkinshoyle.com/2000-fixed-davits-capacity-of-350-lbs.html', type:'davit', mount:'fixed', image:'https://atkinshoyle.com/uploads/products/2000-fixed-adjustable-cast-davit-089507.jpg' },
      '5000f':{ key:'5000f',title:'Model 5000F',swl:CAPACITIES.MODEL_5000F,link:'https://atkinshoyle.com/5000-fixed-davits-capacity-of-750-lbs.html', type:'davit', mount:'fixed', image:'https://atkinshoyle.com/uploads/products/5000-fixed-adjustable-cast-davits-main.jpg' },

      // Cranes (not for sailboats by default)
      '3000r':{ key:'3000r',title:'Model 3000R',swl:CAPACITIES.MODEL_3000R,link:'https://atkinshoyle.com/3000r-crane-capacity-of-300-lb.html', type:'crane', image:'https://atkinshoyle.com/uploads/products/3000-rotating-crane-721624.jpg' },
      '5000r':{ key:'5000r',title:'Model 5000R',swl:CAPACITIES.MODEL_5000R,link:'https://atkinshoyle.com/5000r-crane-capacity-of-750-lb.html', type:'crane', image:'https://atkinshoyle.com/uploads/products/5000r-rotating-crane-331027.jpg' },
      '6500t':{ key:'6500t',title:'Model 6500T',swl:CAPACITIES.MODEL_6500T,link:'https://atkinshoyle.com/6500t-low-profile-crane-capacity-of-650-lb.html', type:'crane', image:'https://atkinshoyle.com/uploads/products/6500t-low-profile-rotating-crane-main-959820.jpg' },
      '8000t':{ key:'8000t',title:'Model 8000T',swl:CAPACITIES.MODEL_8000T,link:'https://atkinshoyle.com/8000t-low-profile-crane-capcity-of-800-lb.html', type:'crane', image:'https://atkinshoyle.com/uploads/products/8000t-low-profile-rotating-crane-main-156577.jpg' },
      // Additional models (images extracted from product pages)
      '3000jr':{ key:'3000jr',title:'Model 3000Jr', swl:300, link:'https://atkinshoyle.com/3000jr-crane-capacity-of-300-lb.html', type:'crane', image:'https://atkinshoyle.com/uploads/products/3000-junior-rotating-crane-243748.jpg' },
      '1400c':{ key:'1400c',title:'Model 1400 Crane', swl:150, link:'https://atkinshoyle.com/1400-crane-capacity-150-lb.html', type:'crane', image:'https://atkinshoyle.com/uploads/products/1400-rotating-crane-main.jpg' },
      '1900c':{ key:'1900c',title:'Model 1900 Crane', swl:200, link:'https://atkinshoyle.com/1900-crane-capacity-of-200-lb.html', type:'crane', image:'https://atkinshoyle.com/uploads/products/no-title-74-main.jpg' }
    };

    // Model groups
    const RAIL_MODELS = ['120','1200r','1400r','1900r'];
    const FIXED_MODELS = ['1400f','1900f','2000','5000f'];
    const CRANE_MODELS = ['3000r','5000r','6500t','8000t'];

    // Models that support power option (show badge)
    const POWER_OPTION_MODELS = new Set(['5000f','5000r','3000r','6500t','8000t']);
     

    function chooseRecommendation({weight, mount, dinghyType, engineWeight, winchPref, tenderType, boatType}){
      const dinghy = Number(weight || 0);
      const engine = Number(engineWeight || 0);
      const totalLift = dinghy + engine; // Total Lift = Dinghy Weight + Outboard Weight

      // Helper: find first model in list with swl >= needed
      function findModelByList(list){
        for(const k of list){
          const m = catalog[k];
          if(m && Number(m.swl) >= totalLift) return Object.assign({}, m);
        }
        return null;
      }

      // Choose candidate davit list based on mount
      const isRailMount = (mount === 'rail');
      const davitList = isRailMount ? RAIL_MODELS : FIXED_MODELS;

      // SAILBOAT logic: default to davits. Only use cranes if totalLift exceeds davit capacity
      if(boatType === 'sailboat'){
        const davit = findModelByList(davitList);
        if(davit){
          // Hard skiff accessory
          if(tenderType === 'hardskiff') davit.addons = ['Gunnel Lock'];
          davit.manualOrPower = POWER_OPTION_MODELS.has(davit.key) ? 'Power Option Available' : 'Manual pulley system operation';
          return davit;
        }
        // if no davit fits, try cranes (allowed only when exceeds davit capacity)
        const crane = findModelByList(CRANE_MODELS);
        if(crane){ crane.manualOrPower = POWER_OPTION_MODELS.has(crane.key) ? 'Power Option Available' : 'Manual pulley system operation'; return crane; }
        // fallback to custom engineered solution
        return {key:'custom', title:'Custom engineered solution required. Contact Atkins & Hoyle.', why:'Total lift exceeds available standard davit and crane capacities. Please contact our engineering team for a tailored solution.', swl:'Varies', type:'custom', link:pages.contact};
      }

      // POWERBOAT logic
      // Cranes recommended for hard skiffs or totalLift > 350
      const requiresCrane = (tenderType === 'hardskiff') || (totalLift > 350);
      if(requiresCrane){
        const crane = findModelByList(CRANE_MODELS);
        if(crane){
          if(tenderType === 'hardskiff') crane.addons = ['Gunnel Lock'];
          crane.manualOrPower = POWER_OPTION_MODELS.has(crane.key) ? 'Power Option Available' : 'Manual pulley system operation';
          return crane;
        }
        // if crane not sufficient, fallback to highest davit or custom
        const davit = findModelByList(davitList);
        if(davit){ davit.manualOrPower = POWER_OPTION_MODELS.has(davit.key) ? 'Power Option Available' : 'Manual pulley system operation'; return davit; }
        return {key:'custom', title:'Custom engineered solution required. Contact Atkins & Hoyle.', why:'Total lift exceeds available standard capacities. Please contact our engineering team for a tailored solution.', swl:'Varies', type:'custom', link:pages.contact};
      }

      // Otherwise prefer davits for lighter loads
      const davit = findModelByList(davitList);
      if(davit){
        if(tenderType === 'hardskiff') davit.addons = ['Gunnel Lock'];
        davit.manualOrPower = POWER_OPTION_MODELS.has(davit.key) ? 'Power Option Available' : 'Manual pulley system operation';
        return davit;
      }

      // Fallback crane selection
      const crane = findModelByList(CRANE_MODELS);
      if(crane){ crane.manualOrPower = POWER_OPTION_MODELS.has(crane.key) ? 'Power Option Available' : 'Manual pulley system operation'; return crane; }

      // final fallback: custom
      return {key:'custom', title:'Custom engineered solution required. Contact Atkins & Hoyle.', why:'Unable to find a suitable standard model for your lift requirement.', swl:'Varies', type:'custom', link:pages.contact};
    }

    function formatResult(rec, inputs){
      const modelName = rec.title || 'Recommended Model';
      const rated = rec.swl ? `${rec.swl} lbs (SWL)` : (rec.ratedCapacity || 'Varies');
      // Prefer the user's selected mount (from inputs); fall back to model compatibility
      function mountLabel(code){
        if(!code) return 'Not specified';
        const map = {swim:'Swim Platform', transom:'Transom', rail:'Rail', deck:'Deck'};
        return map[code] || String(code).replace(/^[a-z]/, s=>s.toUpperCase());
      }
      const mountType = (inputs && inputs.mount) ? mountLabel(inputs.mount) : (rec.mount || rec.mountCompatibility || (rec.type === 'crane' ? 'Deck / Custom' : 'Rail / Transom / Deck'));

      // Recommended model card with image above the title (uses relative ./images/ paths)
      const imgUrl = rec.image || '';
      const features = (typeof KEY_FEATURES !== 'undefined') ? (KEY_FEATURES[rec.key] || []) : [];
      const featuresHTML = `
        <h4 style="margin-top:12px;color:var(--navy);font-size:14px">Key Features</h4>
        <ul class="key-features">
          ${features.map(f => `<li>${f}</li>`).join('')}
        </ul>
      `;

      const recommendedCard = `
        <div class="recommended-card" style="border:1px solid var(--border);padding:12px;border-radius:8px;background:#fff;margin-bottom:12px">
          <img src="${imgUrl}" alt="${modelName}" class="recommendation-image">

          <div style="color:var(--navy);font-weight:700;font-size:12px">RECOMMENDED SOLUTION</div>
          <div style="font-family:'Playfair Display';font-size:24px;color:var(--navy);font-weight:800;margin-top:6px">${modelName}</div>

          <div style="margin-top:10px;color:var(--muted);font-size:14px">
            <div><strong>Rated Capacity:</strong> ${rated}</div>
            <div style="margin-top:6px"><strong>Ideal Mounting:</strong> ${mountType}</div>
            <div style="margin-top:6px"><strong>Compatible With:</strong> ${rec.type === 'crane' ? 'Heavy tenders, powered winch options' : 'Inflatables, RIBs, outboards'}</div>
          </div>

          ${featuresHTML}

          <div style="display:flex;gap:8px;margin-top:12px">
            <a class="primary" href="${rec.link}" target="_blank" style="text-decoration:none;display:inline-block">View Product Page</a>
            <button id="requestQuoteBtn" class="primary" style="margin-left:8px">Request a Quote</button>
            <button id="talkBtn" class="ghost" style="margin-left:8px">Talk to an Expert</button>
          </div>

          <div style="margin-top:10px;color:var(--muted);font-size:13px">Total lift: ${Number(inputs.weight||0) + Number(inputs.engineWeight||0)} lbs</div>

          ${rec.addons && rec.addons.length ? `<div style="margin-top:8px;color:var(--navy);font-weight:700">Add-ons</div><div style="color:var(--muted);font-size:13px">${rec.addons.join(', ')}</div>` : ''}

          <div style="margin-top:8px;color:var(--muted);font-size:13px">${rec.manualOrPower || ''}</div>
        </div>
      `;

      // Return only the main recommended card to keep results minimal and focused
      return recommendedCard;
    }

    function engineWeightLabel(code){
      if(!code) return 'unknown';
      if(code === 'none') return '0 lbs';
      if(code === 'small') return '~50 lbs';
      if(code === '20-40') return '~180 lbs';
      if(code === '40+') return '~300 lbs';
      return code;
    }

    document.getElementById('recommendBtn').addEventListener('click', ()=>{
      const weight = Number(document.getElementById('dinghyWeight').value) || 0;
      const mount = document.querySelector('input[name="mount"]:checked').value;
      const boatType = document.getElementById('boatType') ? document.getElementById('boatType').value : 'powerboat';
      const tenderType = document.getElementById('tenderType').value;
      const engineWeight = document.getElementById('engineWeight').value;
      const winchPref = document.getElementById('winchPref').value;
      const inputs = {weight, mount, boatType, tenderType, engineWeight, winchPref};
      const rec = chooseRecommendation(inputs);

      const area = document.getElementById('resultArea');
      area.innerHTML = formatResult(rec, inputs);
      // Save latest inputs and recommendation for use by inline quote form
      window._lastInputs = inputs;
      window._lastRec = rec;

      const quoteArea = document.getElementById('quoteArea');
      quoteArea.style.display = 'block';

      const quoteBtn = document.getElementById('quoteBtn');
      const subject = encodeURIComponent('Quote Request - Davit/Crane Recommendation');
      const body = encodeURIComponent(
        `Hello Atkins & Hoyle team,%0D%0A%0D%0AI would like a quote for the following:%0D%0A- Dinghy weight: ${weight} lbs%0D%0A- Mounting: ${mount}%0D%0A- Boat type: ${boatType}%0D%0A- Tender type: ${tenderType}%0D%0A- Engine: ${engineWeight}%0D%0A- Winch preference: ${winchPref}%0D%0A%0D%0CRecommended: ${rec.title}%0D%0A${rec.why}%0D%0A%0D%0AYou can view related products here: ${rec.link}%0D%0A%0D%0AThanks,%0D%0A[Your name]`
      );

      quoteBtn.onclick = ()=>{
        // open mailto with prefilled subject/body
        window.location.href = `mailto:info@atkinshoyle.com?subject=${subject}&body=${body}`;
      };
    });

    // Delegate clicks inside result area for dynamic buttons: Talk and Request Quote
    document.getElementById('resultArea').addEventListener('click', (e)=>{
      if(e.target && e.target.id === 'talkBtn'){
        window.open(pages.contact, '_blank');
        return;
      }
      if(e.target && e.target.id === 'requestQuoteBtn'){
        // Build and show inline quote form inside #quoteArea
        const quoteArea = document.getElementById('quoteArea');
        quoteArea.style.display = 'block';
        const inputs = window._lastInputs || {};
        const rec = window._lastRec || {};
        quoteArea.innerHTML = `
          <form id="inlineQuoteForm" style="display:block;padding:12px;border:1px solid var(--border);border-radius:6px;background:#fff">
            <div style="margin-bottom:8px"><label for="qname">Name</label><input id="qname" name="name" required style="width:100%;padding:8px;border:1px solid var(--border);border-radius:4px"/></div>
            <div style="margin-bottom:8px"><label for="qemail">Email</label><input id="qemail" name="email" type="email" required style="width:100%;padding:8px;border:1px solid var(--border);border-radius:4px"/></div>
            <div style="margin-bottom:8px"><label for="qboat">Boat Make / Model</label><input id="qboat" name="boat" style="width:100%;padding:8px;border:1px solid var(--border);border-radius:4px"/></div>
            <div style="margin-bottom:8px"><label for="qloc">Location</label><input id="qloc" name="location" style="width:100%;padding:8px;border:1px solid var(--border);border-radius:4px"/></div>
            <!-- hidden fields with selections -->
              <input type="hidden" name="dinghyWeight" value="${inputs.weight || ''}" />
            <input type="hidden" name="mount" value="${inputs.mount || ''}" />
            <input type="hidden" name="boatType" value="${inputs.boatType || ''}" />
            <input type="hidden" name="tenderType" value="${inputs.tenderType || ''}" />
            <input type="hidden" name="engineWeight" value="${inputs.engineWeight || ''}" />
            <input type="hidden" name="winchPref" value="${inputs.winchPref || ''}" />

            <div style="margin:10px 0;padding:10px;border:1px solid var(--border);border-radius:4px;background:#fafafa">
              <strong style="color:var(--navy)">Summary</strong>
              <div style="color:var(--muted);font-size:13px;margin-top:6px">
                <div><strong>Solution:</strong> ${rec.title || ''}</div>
                <div><strong>Rated capacity:</strong> ${rec.ratedCapacity || (rec.swl? rec.swl + ' lbs (SWL)' : 'Varies')}</div>
                <div><strong>Mounts:</strong> ${rec.mountCompatibility || 'Varies'}</div>
              </div>
            </div>

            <div style="display:flex;gap:8px;margin-top:8px">
              <button type="submit" class="primary">Send Quote Request</button>
              <button type="button" id="cancelQuote" class="ghost">Cancel</button>
            </div>
          </form>
        `;

        // attach form handler
        const form = document.getElementById('inlineQuoteForm');
        form.addEventListener('submit', (ev)=>{
          ev.preventDefault();
          const formData = new FormData(form);
          const payload = {};
          for(const [k,v] of formData.entries()) payload[k]=v;
          // Send via mailto for now (server endpoint not available) but keep the form inline
          const subject = encodeURIComponent('Quote Request from Website');
          let body = `Quote request details:\n\n`;
          for(const k in payload){ body += `${k}: ${payload[k]}\n`; }
          window.location.href = `mailto:info@atkinshoyle.com?subject=${subject}&body=${encodeURIComponent(body)}`;
        });

        document.getElementById('cancelQuote').addEventListener('click', ()=>{ quoteArea.style.display='none'; quoteArea.innerHTML=''; });
      }
    });

    document.getElementById('resetBtn').addEventListener('click', ()=>{
      document.getElementById('dinghyWeight').value = 300;
      document.querySelector('input[name="mount"][value="swim"]').checked = true;
      document.getElementById('boatType').value = 'powerboat';
      document.getElementById('tenderType').value = 'inflatable';
      document.getElementById('engineWeight').value = 'none';
      document.getElementById('winchPref').value = 'unsure';
      
      document.getElementById('resultArea').innerHTML = `<div class="product-title">No selection yet</div><div class="product-sub">Fill the form and click <strong>Get Recommendation</strong> to see the best fit for your boat.</div>`;
      document.getElementById('quoteArea').style.display = 'none';
    });
  </script>
</body>
</html>


